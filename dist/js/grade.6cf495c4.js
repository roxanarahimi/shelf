"use strict";(self["webpackChunkmonitoring"]=self["webpackChunkmonitoring"]||[]).push([[924],{6083:function(e,s,t){t.d(s,{A:function(){return X}});var c=t(6768),o=t(4232);const r={class:"align-self-start text-start bg-light rounded rounded p-3",style:{border:"solid rgb(236,236,236) 1px"}},l={class:"px-1 mb-4 text-start"},u=["value"],n=(0,c.Lk)("b",null,"استان ",-1),a={class:"d-inline-block"},i=(0,c.Lk)("b",null," شهر ",-1),d={class:"d-inline-block"},m=(0,c.Lk)("br",null,null,-1),p=(0,c.Lk)("b",null," منطقه ",-1),k={class:"d-inline-block"},v=(0,c.Lk)("b",null," مسیر ",-1),L={class:"d-inline-block"},f=(0,c.Lk)("b",null," کد مسیر ",-1),g={class:"d-inline-block"},y={class:"d-flex justify-content-between"},b=(0,c.Lk)("b",null,"تلفن ",-1),_={class:"d-inline-block"},h={key:0},x=(0,c.Lk)("b",null,"گرید ",-1),C={class:"d-inline-block"};function q(e,s,t,q,S,A){return(0,c.uX)(),(0,c.CE)("div",r,[(0,c.Lk)("div",l,[(0,c.Lk)("input",{type:"hidden",id:"customer_id",value:t.customer.id},null,8,u),(0,c.Lk)("p",null,(0,o.v_)(t.customer.name),1),(0,c.Lk)("p",null,(0,o.v_)(t.customer.address),1),n,(0,c.Lk)("p",a,(0,o.v_)(t.customer.province.title),1),i,(0,c.Lk)("p",d,(0,o.v_)(t.customer.city.title),1),m,(0,c.Lk)("div",null,[p,(0,c.Lk)("p",k,(0,o.v_)(t.customer.region.title),1),v,(0,c.Lk)("p",L,(0,o.v_)(t.customer.path),1),f,(0,c.Lk)("p",g,(0,o.v_)(t.customer.path_code),1)]),(0,c.Lk)("div",null,[(0,c.Lk)("p",null,(0,o.v_)(t.customer.path_description),1)]),(0,c.Lk)("div",y,[(0,c.Lk)("div",null,[b,(0,c.Lk)("p",_,[(0,c.eW)((0,o.v_)(t.customer.phone)+" ",1),t.customer.mobile&&t.customer.phone?((0,c.uX)(),(0,c.CE)("span",h,"-")):(0,c.Q3)("",!0),(0,c.eW)(" "+(0,o.v_)(t.customer.mobile),1)])]),(0,c.Lk)("div",null,[x,(0,c.Lk)("p",C,(0,o.v_)(t.customer.scores?.grade),1)])])])])}var S={name:"CustomerInfo",props:["customer"]},A=t(1241);const F=(0,A.A)(S,[["render",q]]);var X=F},3241:function(e,s,t){t.d(s,{A:function(){return L}});var c=t(6768);const o={key:0,class:"align-self-center mx-auto",style:{color:"#696969"}},r=(0,c.Lk)("i",{style:{"font-size":"55px"},class:"bi bi-camera-fill"},null,-1),l=(0,c.Lk)("p",{style:{"font-size":"15px","margin-top":"-20px"}},"ثبت تصویر",-1),u=[r,l],n={key:1,class:"image-container p-1"},a=["src"],i=["id"];function d(e,s,t,r,l,d){return(0,c.uX)(),(0,c.CE)(c.FK,null,[(0,c.Lk)("div",{class:"rounded d-grid text-center cursor-pointer",onClick:s[0]||(s[0]=(...e)=>r.selectFile&&r.selectFile(...e)),style:{border:"dashed #c5c8cb 1px","min-height":"200px"}},[r.selectedFile?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)("div",o,u)),r.selectedFile?((0,c.uX)(),(0,c.CE)("div",n,[r.imageSrc?((0,c.uX)(),(0,c.CE)("img",{key:0,class:"img-fluid",style:{width:"360px !important","border-radius":"5px",height:"auto !important"},src:r.imageSrc},null,8,a)):(0,c.Q3)("",!0)])):(0,c.Q3)("",!0)]),(0,c.Lk)("input",{class:"d-none",type:"file",id:"image_"+t.index,onChange:s[1]||(s[1]=(...e)=>r.fileChanged&&r.fileChanged(...e)),accept:"image/*",capture:"environment"},null,40,i)],64)}var m=t(144),p={name:"ImagePicker",props:["index"],setup(e){const s=()=>{document.querySelector("#image_"+e.index).click()},t=(0,m.KR)(),o=(0,m.KR)(null),r=new FileReader;r.onload=e=>{o.value=e.target.result};const l=e=>{let s=e.target.files||e.dataTransfer.files;s.length&&(t.value=s[0]),console.log("files",o.value)};return(0,c.nT)((()=>{t.value?r.readAsDataURL(t.value):o.value=null})),{selectFile:s,fileChanged:l,selectedFile:t,imageSrc:o,fileReader:r}}},k=t(1241);const v=(0,k.A)(p,[["render",d]]);var L=v},4505:function(e,s,t){t.r(s),t.d(s,{default:function(){return ce}});var c=t(6768),o=t(4232);const r={class:"d-grid text-start h-100 px-4"},l=(0,c.Lk)("b",{class:"mb-4 text-start d-block"},"گرید بندی فروشگاه",-1),u={class:"row p-0 m-0"},n={class:"col-6 px-1"},a=(0,c.Lk)("label",{for:"meterage"},"متراژ سوپر مارکت",-1),i={class:"form-select form-select-sm",id:"meterage"},d=["selected"],m=["selected"],p=["selected"],k=["selected"],v=["selected"],L={class:"col-6 px-1"},f=(0,c.Lk)("label",{for:"product_variety"},"تنوع محصولات",-1),g={class:"form-select form-select-sm",id:"product_variety"},y=["selected"],b=["selected"],_=["selected"],h=["selected"],x=["selected"],C={class:"col-6 px-1"},q=(0,c.Lk)("label",{for:"product_layout"},"چیدمان محصولات",-1),S={class:"form-select form-select-sm",id:"product_layout"},A=["selected"],F=["selected"],X=["selected"],E=["selected"],K=["selected"],R={class:"col-6 px-1"},w=(0,c.Lk)("label",{for:"equipment"},"تجهیزات سوپر مارکت",-1),I={class:"form-select form-select-sm",id:"equipment"},Q=["selected"],U=["selected"],W=["selected"],z=["selected"],P=["selected"],T={class:"col-12 px-1"},j=(0,c.Lk)("label",{for:"sector_id"},"محله",-1),D={class:"form-select form-select-sm",id:"sector_id"},G=["selected","value"],B={class:"px-1"},H=(0,c.Lk)("label",null,"تصویر سردر سوپر مارکت",-1),J={class:"align-self-end my-2"};function M(e,s,t,M,N,O){const V=(0,c.g2)("customer-info"),Y=(0,c.g2)("image-picker");return(0,c.uX)(),(0,c.CE)("div",r,[l,M.customer.id?((0,c.uX)(),(0,c.Wv)(V,{key:0,customer:M.customer},null,8,["customer"])):(0,c.Q3)("",!0),(0,c.Lk)("div",u,[(0,c.Lk)("div",n,[a,(0,c.Lk)("select",i,[(0,c.Lk)("option",{selected:M.customer.scores&&1==M.customer.scores.meterage,value:"1"},"کمتر از 12",8,d),(0,c.Lk)("option",{selected:M.customer.scores&&2==M.customer.scores.meterage,value:"2"},"12 تا 25",8,m),(0,c.Lk)("option",{selected:M.customer.scores&&3==M.customer.scores.meterage,value:"3"},"25 تا 45",8,p),(0,c.Lk)("option",{selected:M.customer.scores&&4==M.customer.scores.meterage,value:"4"},"45 تا 60",8,k),(0,c.Lk)("option",{selected:M.customer.scores&&5==M.customer.scores.meterage,value:"5"},"بیش از 60",8,v)])]),(0,c.Lk)("div",L,[f,(0,c.Lk)("select",g,[(0,c.Lk)("option",{selected:M.customer.scores&&1==M.customer.scores.product_variety,value:"1"},"1",8,y),(0,c.Lk)("option",{selected:M.customer.scores&&2==M.customer.scores.product_variety,value:"2"},"2",8,b),(0,c.Lk)("option",{selected:M.customer.scores&&3==M.customer.scores.product_variety,value:"3"},"3",8,_),(0,c.Lk)("option",{selected:M.customer.scores&&4==M.customer.scores.product_variety,value:"4"},"4",8,h),(0,c.Lk)("option",{selected:M.customer.scores&&5==M.customer.scores.product_variety,value:"5"},"5",8,x)])]),(0,c.Lk)("div",C,[q,(0,c.Lk)("select",S,[(0,c.Lk)("option",{selected:M.customer.scores&&1==M.customer.scores.product_layout,value:"1"},"1",8,A),(0,c.Lk)("option",{selected:M.customer.scores&&2==M.customer.scores.product_layout,value:"2"},"2",8,F),(0,c.Lk)("option",{selected:M.customer.scores&&3==M.customer.scores.product_layout,value:"3"},"3",8,X),(0,c.Lk)("option",{selected:M.customer.scores&&4==M.customer.scores.product_layout,value:"4"},"4",8,E),(0,c.Lk)("option",{selected:M.customer.scores&&5==M.customer.scores.product_layout,value:"5"},"5",8,K)])]),(0,c.Lk)("div",R,[w,(0,c.Lk)("select",I,[(0,c.Lk)("option",{selected:M.customer.scores&&1==M.customer.scores.equipment,value:"1"},"1",8,Q),(0,c.Lk)("option",{selected:M.customer.scores&&2==M.customer.scores.equipment,value:"2"},"2",8,U),(0,c.Lk)("option",{selected:M.customer.scores&&3==M.customer.scores.equipment,value:"3"},"3",8,W),(0,c.Lk)("option",{selected:M.customer.scores&&4==M.customer.scores.equipment,value:"4"},"4",8,z),(0,c.Lk)("option",{selected:M.customer.scores&&5==M.customer.scores.equipment,value:"5"},"5",8,P)])]),(0,c.Lk)("div",T,[j,(0,c.Lk)("select",D,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(M.sectors,(e=>((0,c.uX)(),(0,c.CE)("option",{selected:M.customer.scores&&M.customer.scores.sector.id==e.id,key:e.id,value:e.id},(0,o.v_)(e.title),9,G)))),128))])]),(0,c.Lk)("div",B,[H,(0,c.bF)(Y,{index:"1"})])]),(0,c.Lk)("div",J,[(0,c.Lk)("button",{onClick:s[0]||(s[0]=(...e)=>M.saveScores&&M.saveScores(...e)),class:"btn bg"},"ذخیره")])])}t(4114);var N=t(144),O=t(2525),V=t(1387),Y=t(1877),Z=t(6083),$=t(3241),ee={name:"Grade",components:{ImagePicker:$.A,CustomerInfo:Z.A},setup(){const e=(0,V.lq)(),s=O.A.setup().panelUrl,t=(0,N.KR)({}),o=(0,N.KR)([]),r=()=>{axios.get(s+"customer/"+e.params.id).then((e=>{t.value=e.data})).then((()=>{l()})).catch((e=>{console.error(e)}))},l=()=>{axios.get(s+"sector?city_id="+t.value.city.id).then((e=>{o.value=e.data})).catch((e=>{console.error(e)}))},u=()=>{axios.post(s+"score",{customer_id:t.value.id,sector_id:document.querySelector("#sector_id").value,meterage:document.querySelector("#meterage").value,product_variety:document.querySelector("#product_variety").value,product_layout:document.querySelector("#product_layout").value,equipment:document.querySelector("#equipment").value}).then((e=>{Y.A.push({path:"/customer",query:{code:t.value.code}})})).catch((e=>{console.error(e)}))};return(0,c.KC)((()=>{O.A.setup().checkUser(),r()})),{panelUrl:s,loadSectors:l,sectors:o,customer:t,route:e,findCustomer:r,saveScores:u}}},se=t(1241);const te=(0,se.A)(ee,[["render",M]]);var ce=te}}]);
//# sourceMappingURL=grade.6cf495c4.js.map