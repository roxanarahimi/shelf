"use strict";(self["webpackChunkmonitoring"]=self["webpackChunkmonitoring"]||[]).push([[305],{6083:function(e,l,t){t.d(l,{A:function(){return X}});var s=t(6768),n=t(4232);const a={class:"align-self-start text-start bg-light rounded rounded p-3",style:{border:"solid rgb(236,236,236) 1px"}},i={class:"px-1 mb-4 text-start"},c=["value"],r=(0,s.Lk)("b",null,"استان ",-1),o={class:"d-inline-block"},u=(0,s.Lk)("b",null," شهر ",-1),d={class:"d-inline-block"},p=(0,s.Lk)("br",null,null,-1),m=(0,s.Lk)("b",null," منطقه ",-1),k={class:"d-inline-block"},v=(0,s.Lk)("b",null," مسیر ",-1),b={class:"d-inline-block"},g=(0,s.Lk)("b",null," کد مسیر ",-1),L={class:"d-inline-block"},_={class:"d-flex justify-content-between"},f=(0,s.Lk)("b",null,"تلفن ",-1),y={class:"d-inline-block"},x={key:0},h=(0,s.Lk)("b",null,"گرید ",-1),C={class:"d-inline-block"};function E(e,l,t,E,A,F){return(0,s.uX)(),(0,s.CE)("div",a,[(0,s.Lk)("div",i,[(0,s.Lk)("input",{type:"hidden",id:"customer_id",value:t.customer.id},null,8,c),(0,s.Lk)("p",null,(0,n.v_)(t.customer.name),1),(0,s.Lk)("p",null,(0,n.v_)(t.customer.address),1),r,(0,s.Lk)("p",o,(0,n.v_)(t.customer.province.title),1),u,(0,s.Lk)("p",d,(0,n.v_)(t.customer.city.title),1),p,(0,s.Lk)("div",null,[m,(0,s.Lk)("p",k,(0,n.v_)(t.customer.region.title),1),v,(0,s.Lk)("p",b,(0,n.v_)(t.customer.path),1),g,(0,s.Lk)("p",L,(0,n.v_)(t.customer.path_code),1)]),(0,s.Lk)("div",null,[(0,s.Lk)("p",null,(0,n.v_)(t.customer.path_description),1)]),(0,s.Lk)("div",_,[(0,s.Lk)("div",null,[f,(0,s.Lk)("p",y,[(0,s.eW)((0,n.v_)(t.customer.phone)+" ",1),t.customer.mobile&&t.customer.phone?((0,s.uX)(),(0,s.CE)("span",x,"-")):(0,s.Q3)("",!0),(0,s.eW)(" "+(0,n.v_)(t.customer.mobile),1)])]),(0,s.Lk)("div",null,[h,(0,s.Lk)("p",C,(0,n.v_)(t.customer.scores?.grade),1)])])])])}var A={name:"CustomerInfo",props:["customer"]},F=t(1241);const B=(0,F.A)(A,[["render",E]]);var X=B},2384:function(e,l,t){t.d(l,{A:function(){return J}});var s=t(6768),n=t(4232);const a=e=>((0,s.Qi)("data-v-60672ced"),e=e(),(0,s.jt)(),e),i=["id"],c={class:"col-3 px-1"},r=a((()=>(0,s.Lk)("label",null,"نوع محصول",-1))),o={class:"col-3 ps-0 pe-1"},u=a((()=>(0,s.Lk)("label",null,"برند",-1))),d={class:"col-4 ps-0 pe-1"},p=a((()=>(0,s.Lk)("label",null,"فضای تبلیغاتی",-1))),m={class:"col-2 ps-0 pe-1"},k=a((()=>(0,s.Lk)("label",null,"چیدمان",-1))),v={class:"col-12 px-1"},b=a((()=>(0,s.Lk)("label",null,"sku ها",-1))),g={class:"d-flex justify-content-start flex-wrap mb-2"},L={class:"form-check me-2"},_={class:"col-4 px-1"},f=a((()=>(0,s.Lk)("label",null,"تعداد‌ در‌ ‌دیدرس",-1))),y={class:"col-4 ps-0 pe-1"},x=a((()=>(0,s.Lk)("label",null,"شدت حضور",-1))),h={class:"col-4 ps-0 pe-1"},C=a((()=>(0,s.Lk)("label",{class:""},"تاریخ انقضا",-1))),E={class:"col-4 px-1"},A=a((()=>(0,s.Lk)("label",null,"قیمت بسته بندی",-1))),F={class:"col-4 ps-0 pe-1"},B=a((()=>(0,s.Lk)("label",null,"قیمت فروش",-1))),X={class:"col-4 ps-0 pe-1"},K=a((()=>(0,s.Lk)("label",null,"قیمت پخش",-1))),N={key:0,class:"col-12 px-1 mt-2"},R=a((()=>(0,s.Lk)("label",null,"تصویر چیدمان",-1))),S={class:"rounded d-grid text-center cursor-pointer",style:{border:"dashed #c5c8cb 1px","min-height":"200px"}},w=["src"];function I(e,l,t,a,I,Q){return(0,s.uX)(),(0,s.CE)("div",{id:"form-section-"+t.index,class:"row mx-0 px-2 rounded position-relative pt-2 pb-3 my-4",style:{border:"solid  rgba(231,0,0,0.1) 1px","background-color":"rgba(231,0,0,0.05)"}},[(0,s.Lk)("div",c,[r,(0,s.Lk)("p",null,(0,n.v_)(t.section.skuCategory.title),1)]),(0,s.Lk)("div",o,[u,(0,s.Lk)("p",null,(0,n.v_)(t.section.brand.title),1)]),(0,s.Lk)("div",d,[p,(0,s.Lk)("p",null,(0,n.v_)(t.section.space),1)]),(0,s.Lk)("div",m,[k,(0,s.Lk)("p",null,(0,n.v_)(t.section.layout),1)]),(0,s.Lk)("div",v,[b,(0,s.Lk)("div",g,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.section.skus,(e=>((0,s.uX)(),(0,s.CE)("p",L,(0,n.v_)(e.sku.title),1)))),256))])]),(0,s.Lk)("div",_,[f,(0,s.Lk)("p",null,(0,n.v_)(t.section.face),1)]),(0,s.Lk)("div",y,[x,(0,s.Lk)("p",null,(0,n.v_)(t.section.presence),1)]),(0,s.Lk)("div",h,[C,(0,s.Lk)("p",null,(0,n.v_)(t.section.expire_date),1)]),(0,s.Lk)("div",E,[A,(0,s.Lk)("p",null,(0,n.v_)(t.section.label_price),1)]),(0,s.Lk)("div",F,[B,(0,s.Lk)("p",null,(0,n.v_)(t.section.sale_price),1)]),(0,s.Lk)("div",X,[K,(0,s.Lk)("p",null,(0,n.v_)(t.section.distribute_price),1)]),t.section.image?((0,s.uX)(),(0,s.CE)("div",N,[R,(0,s.Lk)("div",S,[(0,s.Lk)("img",{src:t.section.image,class:"w-100",alt:""},null,8,w)])])):(0,s.Q3)("",!0)],8,i)}var Q=t(144),U=t(4803),j=t(1387),W=t(8882),q={name:"FormSection",components:{ImagePicker:W.A},props:["index","section"],setup(){const e=(0,j.lq)(),l=U.A.setup().panelUrl,t=(0,Q.KR)([]),n=(0,Q.KR)({}),a=(0,Q.KR)({}),i=(0,Q.KR)([]),c=()=>{console.log(n.value,a.value),n.value&&a.value&&axios.get(l+"sku?sku_category_id="+n.value.id+"&brand_id="+a.value.id).then((e=>{i.value=e.data,console.log(i.value)})).catch((e=>{console.error(e)}))};return(0,s.KC)((()=>{U.A.setup().checkUser()})),{skuCategories:t,selectedSkuCategory:n,skus:i,loadSkus:c,route:e,panelUrl:l,selectedBrand:a}}},T=t(1241);const z=(0,T.A)(q,[["render",I],["__scopeId","data-v-60672ced"]]);var J=z},8882:function(e,l,t){t.d(l,{A:function(){return y}});var s=t(6768),n=t(5130);const a={key:0,class:"align-self-center mx-auto",style:{color:"#696969"}},i={key:0,class:"image-container p-1"},c=["src"],r={key:1},o=(0,s.Lk)("i",{style:{"font-size":"55px"},class:"bi bi-camera-fill"},null,-1),u=(0,s.Lk)("p",{style:{"font-size":"15px","margin-top":"-20px"}},"ثبت تصویر",-1),d=[o,u],p={key:1,class:"image-container p-1"},m=["src"],k=["id"],v=["id"];function b(e,l,t,o,u,b){return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",{class:"rounded d-grid text-center cursor-pointer",onClick:l[0]||(l[0]=(...e)=>o.selectFile&&o.selectFile(...e)),style:{border:"dashed #c5c8cb 1px","min-height":"200px"}},[o.selectedFile?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",a,[t.img?((0,s.uX)(),(0,s.CE)("div",i,[t.img?((0,s.uX)(),(0,s.CE)("img",{key:0,class:"img-fluid",style:{width:"360px !important","border-radius":"5px",height:"auto !important"},src:t.img},null,8,c)):(0,s.Q3)("",!0)])):((0,s.uX)(),(0,s.CE)("div",r,d))])),o.selectedFile?((0,s.uX)(),(0,s.CE)("div",p,[o.imageSrc?((0,s.uX)(),(0,s.CE)("img",{key:0,class:"img-fluid",style:{width:"360px !important","border-radius":"5px",height:"auto !important"},src:o.imageSrc},null,8,m)):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)]),(0,s.bo)((0,s.Lk)("input",{type:"hidden",name:"image",id:"image_code_"+t.index,"onUpdate:modelValue":l[1]||(l[1]=e=>o.imageSrc=e)},null,8,k),[[n.Jo,o.imageSrc]]),(0,s.Lk)("input",{class:"d-none",type:"file",id:"image_"+t.index,onChange:l[2]||(l[2]=(...e)=>o.fileChanged&&o.fileChanged(...e)),accept:"image/*",capture:"environment"},null,40,v)],64)}var g=t(144),L={name:"ImagePicker",props:["index","name","img"],setup(e){const l=()=>{document.querySelector("#image_"+e.index).click()},t=(0,g.KR)(),n=(0,g.KR)(null),a=new FileReader;a.onload=e=>{n.value=e.target.result};const i=e=>{let l=e.target.files||e.dataTransfer.files;l.length&&(t.value=l[0]),console.log("files",n.value)};return(0,s.nT)((()=>{t.value?a.readAsDataURL(t.value):n.value=null})),{selectFile:l,fileChanged:i,selectedFile:t,imageSrc:n,fileReader:a}}},_=t(1241);const f=(0,_.A)(L,[["render",b]]);var y=f},3105:function(e,l,t){t.r(l),t.d(l,{default:function(){return h}});var s=t(6768);const n=e=>((0,s.Qi)("data-v-673bb6e4"),e=e(),(0,s.jt)(),e),a={class:"text-start px-4"},i=n((()=>(0,s.Lk)("b",{class:"mb-4 text-start d-block"},"فرم شلف مانیتورینگ",-1))),c=n((()=>(0,s.Lk)("div",{class:"d-flex justify-content-end mb-3"},[(0,s.Lk)("b",null,"تاریخ:"),(0,s.Lk)("p",{class:"d-inline-block"},"1403/05/10")],-1))),r={class:"mt-3"},o=n((()=>(0,s.Lk)("b",null," برند های موجود",-1))),u=n((()=>(0,s.Lk)("i",{class:"bi bi-plus-circle-fill"},null,-1))),d=n((()=>(0,s.Lk)("div",{class:"px-0"},[(0,s.Lk)("label",{for:"description"},"توضیحات"),(0,s.Lk)("textarea",{id:"description",class:"form-control form-control-sm",rows:"3"})],-1))),p={class:"px-0 my-4"},m={key:0,class:"error"};function k(e,l,t,n,k,v){const b=(0,s.g2)("customer-info"),g=(0,s.g2)("form-section");return(0,s.uX)(),(0,s.CE)("div",a,[i,c,n.customer.id?((0,s.uX)(),(0,s.Wv)(b,{key:0,customer:n.customer},null,8,["customer"])):(0,s.Q3)("",!0),(0,s.Lk)("div",r,[o,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.brands,((e,l)=>((0,s.uX)(),(0,s.Wv)(g,{info:e,index:l},null,8,["info","index"])))),256))]),(0,s.Lk)("b",{onClick:l[0]||(l[0]=(...e)=>n.addBrand&&n.addBrand(...e)),class:"cursor-pointer"},[(0,s.eW)("افزودن "),u]),d,(0,s.Lk)("div",p,[n.emptyFieldsCount?((0,s.uX)(),(0,s.CE)("p",m,"لطفا همه فیلدها را پر کنید")):(0,s.Q3)("",!0),(0,s.Lk)("button",{class:"btn",style:{"background-color":"#e70000",color:"white"},onClick:l[1]||(l[1]=(...e)=>n.saveForm&&n.saveForm(...e))},"ذخیره")])])}t(4114);var v=t(144),b=t(4803),g=t(1387),L=t(2384),_=t(6083),f={name:"Form",components:{CustomerInfo:_.A,FormSection:L.A},setup(){const e=(0,g.rd)(),l=(0,g.lq)(),t=b.A.setup().panelUrl,n=(0,v.KR)({}),a=JSON.parse(localStorage.getItem("user")),i=(0,v.KR)({}),c=(0,v.KR)(0),r=()=>{axios.get(t+"customer/"+l.params.id).then((e=>{n.value=e.data})).catch((e=>{console.error(e)}))};(0,s.KC)((()=>{b.A.setup().checkUser(),r()}));const o=(0,v.KR)([]),u=()=>{let e={sku_category_id:"",brand_id:"",space:"",layout:"",sku_ids:"",face:"",presence:"",expire_day:"",expire_month:"",expire_year:"",label_price:"",sale_price:"",distribute_price:""};o.value.push(e)},d=e=>{o.value.splice(e,1)},p=()=>{c.value=b.A.setup().EmptyFieldsCount();let s=[];if(0===c.value){for(let e=0;e<document.getElementsByName("sku_category").length;e++){let l=document.getElementsByName("sku_category")[e].getAttribute("data-value-id"),t=[];document.querySelectorAll("[name='skus_of_cat__"+l+"']:checked").forEach((e=>{t.push(parseInt(e.value))})),s.push({sku_category_id:parseInt(l),brand_id:document.getElementsByName("brand")[e].getAttribute("data-value-id"),sku_ids:t,face:document.getElementsByName("face")[e].value,presence:document.getElementsByName("presence")[e].value,space:document.getElementsByName("space")[e].value,layout:document.getElementsByName("layout")[e].value,expire_date:document.getElementsByName("expire_year")[e].value+"-"+document.getElementsByName("expire_month")[e].value+"-"+document.getElementsByName("expire_day")[e].value,label_price:document.getElementsByName("label_price")[e].value,sale_price:document.getElementsByName("sale_price")[e].value,distribute_price:document.getElementsByName("distribute_price")[e].value})}axios.post(t+"form",{visitor_id:a.id,customer_id:l.params.id,form:s}).then((l=>{201!==l.status&&200!==l.status||(b.A.setup().reloadVisitor(),setTimeout((()=>{e.push({name:"forms"})}),1e3))})).catch((e=>{console.error(e)}))}};return{brands:o,addBrand:u,customer:n,visitor:a,findCustomer:r,router:e,route:l,form:i,removeBrand:d,saveForm:p,emptyFieldsCount:c}}},y=t(1241);const x=(0,y.A)(f,[["render",k],["__scopeId","data-v-673bb6e4"]]);var h=x}}]);
//# sourceMappingURL=formEdit.faeee3ed.js.map