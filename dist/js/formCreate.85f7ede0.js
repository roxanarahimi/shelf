"use strict";(self["webpackChunkmonitoring"]=self["webpackChunkmonitoring"]||[]).push([[37],{6083:function(e,a,t){t.d(a,{A:function(){return A}});var o=t(6768),l=t(4232);const n={class:"align-self-start text-start bg-light rounded rounded p-3",style:{border:"solid rgb(236,236,236) 1px"}},i={class:"px-1 mb-4 text-start"},c=["value"],s=(0,o.Lk)("b",null,"استان ",-1),d={class:"d-inline-block"},r=(0,o.Lk)("b",null," شهر ",-1),u={class:"d-inline-block"},p=(0,o.Lk)("br",null,null,-1),b=(0,o.Lk)("b",null," منطقه ",-1),v={class:"d-inline-block"},m=(0,o.Lk)("b",null," مسیر ",-1),k={class:"d-inline-block"},f=(0,o.Lk)("b",null," کد مسیر ",-1),g={class:"d-inline-block"},_={class:"d-flex justify-content-between"},y=(0,o.Lk)("b",null,"تلفن ",-1),x={class:"d-inline-block"},L={key:0},h=(0,o.Lk)("b",null,"گرید ",-1),C={class:"d-inline-block"};function E(e,a,t,E,F,B){return(0,o.uX)(),(0,o.CE)("div",n,[(0,o.Lk)("div",i,[(0,o.Lk)("input",{type:"hidden",id:"customer_id",value:t.customer.id},null,8,c),(0,o.Lk)("p",null,(0,l.v_)(t.customer.name),1),(0,o.Lk)("p",null,(0,l.v_)(t.customer.address),1),s,(0,o.Lk)("p",d,(0,l.v_)(t.customer.province.title),1),r,(0,o.Lk)("p",u,(0,l.v_)(t.customer.city.title),1),p,(0,o.Lk)("div",null,[b,(0,o.Lk)("p",v,(0,l.v_)(t.customer.region.title),1),m,(0,o.Lk)("p",k,(0,l.v_)(t.customer.path),1),f,(0,o.Lk)("p",g,(0,l.v_)(t.customer.path_code),1)]),(0,o.Lk)("div",null,[(0,o.Lk)("p",null,(0,l.v_)(t.customer.path_description),1)]),(0,o.Lk)("div",_,[(0,o.Lk)("div",null,[y,(0,o.Lk)("p",x,[(0,o.eW)((0,l.v_)(t.customer.phone)+" ",1),t.customer.mobile&&t.customer.phone?((0,o.uX)(),(0,o.CE)("span",L,"-")):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,l.v_)(t.customer.mobile),1)])]),(0,o.Lk)("div",null,[h,(0,o.Lk)("p",C,(0,l.v_)(t.customer.scores?.grade),1)])])])])}var F={name:"CustomerInfo",props:["customer"]},B=t(1241);const S=(0,B.A)(F,[["render",E]]);var A=S},3241:function(e,a,t){t.d(a,{A:function(){return k}});var o=t(6768);const l={key:0,class:"align-self-center mx-auto",style:{color:"#696969"}},n=(0,o.Lk)("i",{style:{"font-size":"55px"},class:"bi bi-camera-fill"},null,-1),i=(0,o.Lk)("p",{style:{"font-size":"15px","margin-top":"-20px"}},"ثبت تصویر",-1),c=[n,i],s={key:1,class:"image-container p-1"},d=["src"],r=["id"];function u(e,a,t,n,i,u){return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",{class:"rounded d-grid text-center cursor-pointer",onClick:a[0]||(a[0]=(...e)=>n.selectFile&&n.selectFile(...e)),style:{border:"dashed #c5c8cb 1px","min-height":"200px"}},[n.selectedFile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",l,c)),n.selectedFile?((0,o.uX)(),(0,o.CE)("div",s,[n.imageSrc?((0,o.uX)(),(0,o.CE)("img",{key:0,class:"img-fluid",style:{width:"360px !important","border-radius":"5px",height:"auto !important"},src:n.imageSrc},null,8,d)):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)]),(0,o.Lk)("input",{class:"d-none",type:"file",id:"image_"+t.index,onChange:a[1]||(a[1]=(...e)=>n.fileChanged&&n.fileChanged(...e)),accept:"image/*",capture:"environment"},null,40,r)],64)}var p=t(144),b={name:"ImagePicker",props:["index"],setup(e){const a=()=>{document.querySelector("#image_"+e.index).click()},t=(0,p.KR)(),l=(0,p.KR)(null),n=new FileReader;n.onload=e=>{l.value=e.target.result};const i=e=>{let a=e.target.files||e.dataTransfer.files;a.length&&(t.value=a[0]),console.log("files",l.value)};return(0,o.nT)((()=>{t.value?n.readAsDataURL(t.value):l.value=null})),{selectFile:a,fileChanged:i,selectedFile:t,imageSrc:l,fileReader:n}}},v=t(1241);const m=(0,v.A)(b,[["render",u]]);var k=m},6541:function(e,a,t){t.r(a),t.d(a,{default:function(){return Y}});var o=t(6768);const l=e=>((0,o.Qi)("data-v-5e376a32"),e=e(),(0,o.jt)(),e),n={class:"text-start px-4"},i=l((()=>(0,o.Lk)("b",{class:"mb-4 text-start d-block"},"فرم شلف مانیتورینگ",-1))),c={class:"mt-3"},s=l((()=>(0,o.Lk)("b",null," برند های موجود",-1))),d=l((()=>(0,o.Lk)("i",{class:"bi bi-plus-circle-fill"},null,-1))),r=l((()=>(0,o.Lk)("div",{class:"px-0"},[(0,o.Lk)("label",{for:"description"},"توضیحات"),(0,o.Lk)("textarea",{id:"description",class:"form-control form-control-sm",rows:"3"})],-1))),u={class:"px-0 my-4"},p={key:0,class:"error"};function b(e,a,t,l,b,v){const m=(0,o.g2)("customer-info"),k=(0,o.g2)("form-section-form");return(0,o.uX)(),(0,o.CE)("div",n,[i,l.customer.id?((0,o.uX)(),(0,o.Wv)(m,{key:0,customer:l.customer},null,8,["customer"])):(0,o.Q3)("",!0),(0,o.Lk)("div",c,[s,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.formSections,((e,a)=>((0,o.uX)(),(0,o.Wv)(k,{info:e,index:a},null,8,["info","index"])))),256))]),(0,o.Lk)("b",{onClick:a[0]||(a[0]=(...e)=>l.addBrand&&l.addBrand(...e)),class:"cursor-pointer"},[(0,o.eW)("افزودن "),d]),r,(0,o.Lk)("div",u,[l.emptyFieldsCount?((0,o.uX)(),(0,o.CE)("p",p,"لطفا همه فیلدها را پر کنید")):(0,o.Q3)("",!0),(0,o.Lk)("button",{class:"btn",style:{"background-color":"#e70000",color:"white"},onClick:a[1]||(a[1]=(...e)=>l.saveForm&&l.saveForm(...e))},"ذخیره")])])}t(4114);var v=t(144),m=t(922),k=t(1387),f=t(4232),g=t(5130);const _=e=>((0,o.Qi)("data-v-7ce0abba"),e=e(),(0,o.jt)(),e),y=["id"],x=_((()=>(0,o.Lk)("i",{class:"bi bi-x-circle-fill"},null,-1))),L=[x],h={class:"col-3 px-1"},C=_((()=>(0,o.Lk)("label",{for:"sku_category_id"},"نوع محصول",-1))),E=["data-value-id"],F=_((()=>(0,o.Lk)("option",{value:""},null,-1))),B=["value"],S={class:"col-3 ps-0 pe-1"},A=_((()=>(0,o.Lk)("label",{for:"brand"},"برند",-1))),X=["data-value-id"],K=_((()=>(0,o.Lk)("option",{value:""},null,-1))),N=["value"],I=(0,o.Fv)('<div class="col-4 ps-0 pe-1" data-v-7ce0abba><label data-v-7ce0abba>فضای تبلیغاتی</label><select class="form-select form-select-sm" name="space" data-v-7ce0abba><option value="استیکر" data-v-7ce0abba>استیکر</option><option value="تابلو فروشگاه" data-v-7ce0abba>تابلو فروشگاه</option><option value="سایه بان" data-v-7ce0abba>سایه بان</option><option value="پوستر" data-v-7ce0abba>پوستر</option><option value="استند" data-v-7ce0abba>استند</option><option value="دنگلر" data-v-7ce0abba>دنگلر</option><option value="لایت باکس" data-v-7ce0abba>لایت باکس</option><option value="وابلر" data-v-7ce0abba>وابلر</option><option value="شلف تاکر" data-v-7ce0abba>شلف تاکر</option><option value="پروموتر" data-v-7ce0abba>پروموتر</option><option value="پلی شلف" data-v-7ce0abba>پلی شلف</option></select></div><div class="col-2 ps-0 pe-1" data-v-7ce0abba><label data-v-7ce0abba>چیدمان</label><select class="form-select form-select-sm" name="layout" data-v-7ce0abba><option value="1" data-v-7ce0abba>1</option><option value="2" data-v-7ce0abba>2</option><option value="3" data-v-7ce0abba>3</option><option value="4" data-v-7ce0abba>4</option><option value="5" data-v-7ce0abba>5</option></select></div>',2),R={class:"col-12 px-1"},w=_((()=>(0,o.Lk)("label",null,"sku ها",-1))),Q={class:"d-flex justify-content-start flex-wrap mb-2"},U={class:"form-check me-2"},q=["value","name","id"],W=["for"],j=(0,o.Fv)('<div class="col-3 px-1" data-v-7ce0abba><label data-v-7ce0abba>تعداد‌ در‌ ‌دیدرس</label><input type="number" class="form-control form-control-sm en" name="face" data-v-7ce0abba></div><div class="col-3 ps-0 pe-1" data-v-7ce0abba><label data-v-7ce0abba>شدت حضور</label><select class="form-select form-select-sm" name="presence" data-v-7ce0abba><option value="1" data-v-7ce0abba>1</option><option value="2" data-v-7ce0abba>2</option><option value="3" data-v-7ce0abba>3</option><option value="4" data-v-7ce0abba>4</option><option value="5" data-v-7ce0abba>5</option></select></div><div class="col-2 ps-0 pe-1" data-v-7ce0abba><label class="" data-v-7ce0abba>تاریخ انقضا</label><select class="form-select form-select-sm" name="expire_day" data-v-7ce0abba><option value="1" data-v-7ce0abba>1</option><option value="2" data-v-7ce0abba>2</option><option value="3" data-v-7ce0abba>3</option><option value="4" data-v-7ce0abba>4</option><option value="5" data-v-7ce0abba>5</option><option value="6" data-v-7ce0abba>6</option><option value="7" data-v-7ce0abba>7</option><option value="8" data-v-7ce0abba>8</option><option value="9" data-v-7ce0abba>9</option><option value="10" data-v-7ce0abba>10</option><option value="11" data-v-7ce0abba>11</option><option value="12" data-v-7ce0abba>12</option><option value="13" data-v-7ce0abba>13</option><option value="14" data-v-7ce0abba>14</option><option value="15" data-v-7ce0abba>15</option><option value="16" data-v-7ce0abba>16</option><option value="17" data-v-7ce0abba>17</option><option value="18" data-v-7ce0abba>18</option><option value="19" data-v-7ce0abba>19</option><option value="20" data-v-7ce0abba>20</option><option value="21" data-v-7ce0abba>21</option><option value="22" data-v-7ce0abba>22</option><option value="23" data-v-7ce0abba>23</option><option value="24" data-v-7ce0abba>24</option><option value="25" data-v-7ce0abba>25</option><option value="26" data-v-7ce0abba>26</option><option value="27" data-v-7ce0abba>27</option><option value="28" data-v-7ce0abba>28</option><option value="29" data-v-7ce0abba>29</option><option value="30" data-v-7ce0abba>30</option><option value="31" data-v-7ce0abba>31</option></select></div><div class="col-2 ps-0 pe-1" data-v-7ce0abba><label data-v-7ce0abba> </label><select class="form-select form-select-sm" name="expire_month" data-v-7ce0abba><option value="1" data-v-7ce0abba>1</option><option value="2" data-v-7ce0abba>2</option><option value="3" data-v-7ce0abba>3</option><option value="4" data-v-7ce0abba>4</option><option value="5" data-v-7ce0abba>5</option><option value="6" data-v-7ce0abba>6</option><option value="7" data-v-7ce0abba>7</option><option value="8" data-v-7ce0abba>8</option><option value="9" data-v-7ce0abba>9</option><option value="10" data-v-7ce0abba>10</option><option value="11" data-v-7ce0abba>11</option><option value="12" data-v-7ce0abba>12</option></select></div><div class="col-2 ps-0 pe-1" data-v-7ce0abba><label data-v-7ce0abba> </label><input type="number" class="form-control form-control-sm en" value="1403" name="expire_year" data-v-7ce0abba></div><div class="col-4 px-1" data-v-7ce0abba><label data-v-7ce0abba>قیمت بسته بندی</label><input type="number" min="0" class="form-control form-control-sm en" name="label_price" data-v-7ce0abba></div><div class="col-4 ps-0 pe-1" data-v-7ce0abba><label data-v-7ce0abba>قیمت فروش</label><input type="number" min="0" class="form-control form-control-sm en" name="sale_price" data-v-7ce0abba></div><div class="col-4 ps-0 pe-1" data-v-7ce0abba><label data-v-7ce0abba>قیمت پخش</label><input type="number" min="0" class="form-control form-control-sm en" name="distribute_price" data-v-7ce0abba></div>',8),z={class:"col-12 px-1 mt-2"},T=_((()=>(0,o.Lk)("label",null,"تصویر چیدمان",-1)));function V(e,a,t,l,n,i){const c=(0,o.g2)("image-picker");return(0,o.uX)(),(0,o.CE)("div",{id:"form-section-"+t.index,class:"row mx-0 px-2 rounded position-relative pt-2 pb-3 my-4",style:{border:"solid  rgba(231,0,0,0.1) 1px","background-color":"rgba(231,0,0,0.05)"}},[(0,o.Lk)("div",{onClick:a[0]||(a[0]=a=>e.$parent.removeBrand(t.index)),style:{position:"absolute",top:"-10px",right:"-20px",cursor:"pointer","font-size":"18px"}},L),(0,o.Lk)("div",h,[C,(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>l.selectedSkuCategory=e),"data-value-id":l.selectedSkuCategory.id,name:"sku_category",class:"form-select form-select-sm",id:"sku_category_id",required:""},[F,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.skuCategories,(e=>((0,o.uX)(),(0,o.CE)("option",{value:e},(0,f.v_)(e.title),9,B)))),256))],8,E),[[g.u1,l.selectedSkuCategory]])]),(0,o.Lk)("div",S,[A,(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>l.selectedBrand=e),"data-value-id":l.selectedBrand.id,onChange:a[3]||(a[3]=(...e)=>l.loadSkus&&l.loadSkus(...e)),name:"brand",class:"form-select form-select-sm",id:"brand",required:""},[K,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.selectedSkuCategory.brands,(e=>((0,o.uX)(),(0,o.CE)("option",{value:e.brand},(0,f.v_)(e.brand.title),9,N)))),256))],40,X),[[g.u1,l.selectedBrand]])]),I,(0,o.Lk)("div",R,[w,(0,o.Lk)("div",Q,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.skus,(e=>((0,o.uX)(),(0,o.CE)("div",U,[(0,o.Lk)("input",{class:"form-check-input",type:"checkbox",value:e.id,name:"skus_of_cat__"+l.selectedSkuCategory.id+"__brand"+l.selectedBrand.id,id:"sku_"+e.id},null,8,q),(0,o.Lk)("label",{class:"form-check-label",for:"sku_"+e.id},(0,f.v_)(e.title),9,W)])))),256))])]),j,(0,o.Lk)("div",z,[T,(0,o.bF)(c,{index:t.index},null,8,["index"])])],8,y)}var P=t(3241),D={name:"FormSectionForm",components:{ImagePicker:P.A},props:["index"],setup(){const e=(0,k.lq)(),a=m.A.setup().panelUrl,t=(0,v.KR)([]),l=(0,v.KR)({}),n=(0,v.KR)({}),i=(0,v.KR)([]),c=()=>{axios.get(a+"category/sku").then((e=>{t.value=e.data})).catch((e=>{console.error(e)}))},s=()=>{console.log(l.value,n.value),l.value&&n.value&&axios.get(a+"sku?sku_category_id="+l.value.id+"&brand_id="+n.value.id).then((e=>{i.value=e.data,console.log(i.value)})).catch((e=>{console.error(e)}))};return(0,o.KC)((()=>{m.A.setup().checkUser(),c()})),{skuCategories:t,loadSkuCategories:c,selectedSkuCategory:l,skus:i,loadSkus:s,route:e,panelUrl:a,selectedBrand:n}}},J=t(1241);const O=(0,J.A)(D,[["render",V],["__scopeId","data-v-7ce0abba"]]);var $=O,G=t(6083),H={name:"Form",components:{CustomerInfo:G.A,FormSectionForm:$},setup(){const e=(0,k.rd)(),a=(0,k.lq)(),t=m.A.setup().panelUrl,l=(0,v.KR)({}),n=JSON.parse(localStorage.getItem("user")),i=(0,v.KR)({}),c=(0,v.KR)(0),s=()=>{axios.get(t+"customer/"+a.params.id).then((e=>{l.value=e.data})).catch((e=>{console.error(e)}))};(0,o.KC)((()=>{m.A.setup().checkUser(),s()}));const d=(0,v.KR)([]),r=()=>{let e={sku_category_id:"",brand_id:"",space:"",layout:"",sku_ids:"",face:"",presence:"",expire_day:"",expire_month:"",expire_year:"",label_price:"",sale_price:"",distribute_price:""};d.value.push(e)},u=e=>{d.value.splice(e,1)},p=()=>{c.value=m.A.setup().EmptyFieldsCount();let o=[];if(0===c.value){for(let e=0;e<document.getElementsByName("sku_category").length;e++){let a=document.getElementsByName("sku_category")[e].getAttribute("data-value-id"),t=document.getElementsByName("brand")[e].getAttribute("data-value-id"),l=[];document.querySelectorAll("[name='skus_of_cat__"+a+"__brand"+t+"']:checked").forEach((e=>{l.push(parseInt(e.value))})),o.push({sku_category_id:parseInt(a),brand_id:t,sku_ids:l,face:document.getElementsByName("face")[e].value,presence:document.getElementsByName("presence")[e].value,space:document.getElementsByName("space")[e].value,layout:document.getElementsByName("layout")[e].value,expire_date:document.getElementsByName("expire_year")[e].value+"-"+document.getElementsByName("expire_month")[e].value+"-"+document.getElementsByName("expire_day")[e].value,label_price:document.getElementsByName("label_price")[e].value,sale_price:document.getElementsByName("sale_price")[e].value,distribute_price:document.getElementsByName("distribute_price")[e].value})}axios.post(t+"form",{visitor_id:n.id,customer_id:a.params.id,description:document.querySelector("#description").value,form:o}).then((a=>{201!==a.status&&200!==a.status||(m.A.setup().reloadVisitor(),setTimeout((()=>{e.push({name:"forms"})}),1e3))})).catch((e=>{console.error(e)}))}};return{formSections:d,addBrand:r,customer:l,visitor:n,findCustomer:s,router:e,route:a,form:i,removeBrand:u,saveForm:p,emptyFieldsCount:c}}};const M=(0,J.A)(H,[["render",b],["__scopeId","data-v-5e376a32"]]);var Y=M}}]);
//# sourceMappingURL=formCreate.85f7ede0.js.map