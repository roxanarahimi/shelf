"use strict";(self["webpackChunkmonitoring"]=self["webpackChunkmonitoring"]||[]).push([[37],{6083:function(e,t,a){a.d(t,{A:function(){return A}});var o=a(6768),l=a(4232);const n={class:"align-self-start text-start bg-light rounded rounded p-3",style:{border:"solid rgb(236,236,236) 1px"}},d={class:"px-1 mb-4 text-start"},i=["value"],s=(0,o.Lk)("b",null,"استان ",-1),r={class:"d-inline-block"},u=(0,o.Lk)("b",null," شهر ",-1),c={class:"d-inline-block"},p=(0,o.Lk)("br",null,null,-1),v=(0,o.Lk)("b",null," منطقه ",-1),m={class:"d-inline-block"},k=(0,o.Lk)("b",null," مسیر ",-1),b={class:"d-inline-block"},f=(0,o.Lk)("b",null," کد مسیر ",-1),g={class:"d-inline-block"},_={class:"d-flex justify-content-between"},y=(0,o.Lk)("b",null,"تلفن ",-1),x={class:"d-inline-block"},L={key:0},h=(0,o.Lk)("b",null,"گرید ",-1),C={class:"d-inline-block"};function E(e,t,a,E,F,B){return(0,o.uX)(),(0,o.CE)("div",n,[(0,o.Lk)("div",d,[(0,o.Lk)("input",{type:"hidden",id:"customer_id",value:a.customer.id},null,8,i),(0,o.Lk)("p",null,(0,l.v_)(a.customer.name),1),(0,o.Lk)("p",null,(0,l.v_)(a.customer.address),1),s,(0,o.Lk)("p",r,(0,l.v_)(a.customer.province.title),1),u,(0,o.Lk)("p",c,(0,l.v_)(a.customer.city.title),1),p,(0,o.Lk)("div",null,[v,(0,o.Lk)("p",m,(0,l.v_)(a.customer.region.title),1),k,(0,o.Lk)("p",b,(0,l.v_)(a.customer.path),1),f,(0,o.Lk)("p",g,(0,l.v_)(a.customer.path_code),1)]),(0,o.Lk)("div",null,[(0,o.Lk)("p",null,(0,l.v_)(a.customer.path_description),1)]),(0,o.Lk)("div",_,[(0,o.Lk)("div",null,[y,(0,o.Lk)("p",x,[(0,o.eW)((0,l.v_)(a.customer.phone)+" ",1),a.customer.mobile&&a.customer.phone?((0,o.uX)(),(0,o.CE)("span",L,"-")):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,l.v_)(a.customer.mobile),1)])]),(0,o.Lk)("div",null,[h,(0,o.Lk)("p",C,(0,l.v_)(a.customer.scores?.grade),1)])])])])}var F={name:"CustomerInfo",props:["customer"]},B=a(1241);const S=(0,B.A)(F,[["render",E]]);var A=S},3241:function(e,t,a){a.d(t,{A:function(){return b}});var o=a(6768);const l={key:0,class:"align-self-center mx-auto",style:{color:"#696969"}},n=(0,o.Lk)("i",{style:{"font-size":"55px"},class:"bi bi-camera-fill"},null,-1),d=(0,o.Lk)("p",{style:{"font-size":"15px","margin-top":"-20px"}},"ثبت تصویر",-1),i=[n,d],s={key:1,class:"image-container p-1"},r=["src"],u=["id"];function c(e,t,a,n,d,c){return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",{class:"rounded d-grid text-center cursor-pointer",onClick:t[0]||(t[0]=(...e)=>n.selectFile&&n.selectFile(...e)),style:{border:"dashed #c5c8cb 1px","min-height":"200px"}},[n.selectedFile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",l,i)),n.selectedFile?((0,o.uX)(),(0,o.CE)("div",s,[n.imageSrc?((0,o.uX)(),(0,o.CE)("img",{key:0,class:"img-fluid",style:{width:"360px !important","border-radius":"5px",height:"auto !important"},src:n.imageSrc},null,8,r)):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)]),(0,o.Lk)("input",{class:"d-none",type:"file",id:"image_"+a.index,onChange:t[1]||(t[1]=(...e)=>n.fileChanged&&n.fileChanged(...e)),accept:"image/*",capture:"environment"},null,40,u)],64)}var p=a(144),v={name:"ImagePicker",props:["index"],setup(e){const t=()=>{document.querySelector("#image_"+e.index).click()},a=(0,p.KR)(),l=(0,p.KR)(null),n=new FileReader;n.onload=e=>{l.value=e.target.result};const d=e=>{let t=e.target.files||e.dataTransfer.files;t.length&&(a.value=t[0]),console.log("files",l.value)};return(0,o.nT)((()=>{a.value?n.readAsDataURL(a.value):l.value=null})),{selectFile:t,fileChanged:d,selectedFile:a,imageSrc:l,fileReader:n}}},m=a(1241);const k=(0,m.A)(v,[["render",c]]);var b=k},5114:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});var o=a(6768);const l=e=>((0,o.Qi)("data-v-10cd4bb1"),e=e(),(0,o.jt)(),e),n={class:"text-start px-4"},d=l((()=>(0,o.Lk)("b",{class:"mb-4 text-start d-block"},"فرم شلف مانیتورینگ",-1))),i=l((()=>(0,o.Lk)("div",{class:"d-flex justify-content-end mb-3"},[(0,o.Lk)("b",null,"تاریخ:"),(0,o.Lk)("p",{class:"d-inline-block"},"1403/05/10")],-1))),s={class:"mt-3"},r=l((()=>(0,o.Lk)("b",null," برند های موجود",-1))),u=l((()=>(0,o.Lk)("i",{class:"bi bi-plus-circle-fill"},null,-1))),c=l((()=>(0,o.Lk)("div",{class:"px-0"},[(0,o.Lk)("label",{for:"description"},"توضیحات"),(0,o.Lk)("textarea",{id:"description",class:"form-control form-control-sm",rows:"3"})],-1))),p={class:"px-0 my-4"},v={key:0,class:"error"};function m(e,t,a,l,m,k){const b=(0,o.g2)("customer-info"),f=(0,o.g2)("form-section-form");return(0,o.uX)(),(0,o.CE)("div",n,[d,i,l.customer.id?((0,o.uX)(),(0,o.Wv)(b,{key:0,customer:l.customer},null,8,["customer"])):(0,o.Q3)("",!0),(0,o.Lk)("div",s,[r,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.brands,((e,t)=>((0,o.uX)(),(0,o.Wv)(f,{info:e,index:t},null,8,["info","index"])))),256))]),(0,o.Lk)("b",{onClick:t[0]||(t[0]=(...e)=>l.addBrand&&l.addBrand(...e)),class:"cursor-pointer"},[(0,o.eW)("افزودن "),u]),c,(0,o.Lk)("div",p,[l.emptyFieldsCount?((0,o.uX)(),(0,o.CE)("p",v,"لطفا همه فیلدها را پر کنید")):(0,o.Q3)("",!0),(0,o.Lk)("button",{class:"btn",style:{"background-color":"#e70000",color:"white"},onClick:t[1]||(t[1]=(...e)=>l.saveForm&&l.saveForm(...e))},"ذخیره")])])}a(4114);var k=a(144),b=a(9429),f=a(1387),g=a(4232),_=a(5130);const y=e=>((0,o.Qi)("data-v-6644033d"),e=e(),(0,o.jt)(),e),x=["id"],L=y((()=>(0,o.Lk)("i",{class:"bi bi-x-circle-fill"},null,-1))),h=[L],C={class:"col-3 px-1"},E=y((()=>(0,o.Lk)("label",{for:"sku_category_id"},"نوع محصول",-1))),F=["data-value-id"],B=y((()=>(0,o.Lk)("option",{value:""},null,-1))),S=["value"],A={class:"col-3 ps-0 pe-1"},X=y((()=>(0,o.Lk)("label",{for:"brand"},"برند",-1))),K=["data-value-id"],N=y((()=>(0,o.Lk)("option",{value:""},null,-1))),I=["value"],R=(0,o.Fv)('<div class="col-4 ps-0 pe-1" data-v-6644033d><label data-v-6644033d>فضای تبلیغاتی</label><select class="form-select form-select-sm" name="space" data-v-6644033d><option value="استیکر" data-v-6644033d>استیکر</option><option value="تابلو فروشگاه" data-v-6644033d>تابلو فروشگاه</option><option value="سایه بان" data-v-6644033d>سایه بان</option><option value="پوستر" data-v-6644033d>پوستر</option><option value="استند" data-v-6644033d>استند</option><option value="دنگلر" data-v-6644033d>دنگلر</option><option value="لایت باکس" data-v-6644033d>لایت باکس</option><option value="وابلر" data-v-6644033d>وابلر</option><option value="شلف تاکر" data-v-6644033d>شلف تاکر</option><option value="پروموتر" data-v-6644033d>پروموتر</option><option value="پلی شلف" data-v-6644033d>پلی شلف</option></select></div><div class="col-2 ps-0 pe-1" data-v-6644033d><label data-v-6644033d>چیدمان</label><select class="form-select form-select-sm" name="layout" data-v-6644033d><option value="1" data-v-6644033d>1</option><option value="2" data-v-6644033d>2</option><option value="3" data-v-6644033d>3</option><option value="4" data-v-6644033d>4</option><option value="5" data-v-6644033d>5</option></select></div>',2),w={class:"col-12 px-1"},Q=y((()=>(0,o.Lk)("label",null,"sku ها",-1))),U={class:"d-flex justify-content-start flex-wrap mb-2"},q={class:"form-check me-2"},j=["value","name","id"],W=["for"],z=(0,o.Fv)('<div class="col-3 px-1" data-v-6644033d><label data-v-6644033d>تعداد‌ در‌ ‌دیدرس</label><input type="number" class="form-control form-control-sm en" name="face" data-v-6644033d></div><div class="col-3 ps-0 pe-1" data-v-6644033d><label data-v-6644033d>شدت حضور</label><select class="form-select form-select-sm" name="presence" data-v-6644033d><option value="1" data-v-6644033d>1</option><option value="2" data-v-6644033d>2</option><option value="3" data-v-6644033d>3</option><option value="4" data-v-6644033d>4</option><option value="5" data-v-6644033d>5</option></select></div><div class="col-2 ps-0 pe-1" data-v-6644033d><label class="" data-v-6644033d>تاریخ انقضا</label><select class="form-select form-select-sm" name="expire_day" data-v-6644033d><option value="1" data-v-6644033d>1</option><option value="2" data-v-6644033d>2</option><option value="3" data-v-6644033d>3</option><option value="4" data-v-6644033d>4</option><option value="5" data-v-6644033d>5</option><option value="6" data-v-6644033d>6</option><option value="7" data-v-6644033d>7</option><option value="8" data-v-6644033d>8</option><option value="9" data-v-6644033d>9</option><option value="10" data-v-6644033d>10</option><option value="11" data-v-6644033d>11</option><option value="12" data-v-6644033d>12</option><option value="13" data-v-6644033d>13</option><option value="14" data-v-6644033d>14</option><option value="15" data-v-6644033d>15</option><option value="16" data-v-6644033d>16</option><option value="17" data-v-6644033d>17</option><option value="18" data-v-6644033d>18</option><option value="19" data-v-6644033d>19</option><option value="20" data-v-6644033d>20</option><option value="21" data-v-6644033d>21</option><option value="22" data-v-6644033d>22</option><option value="23" data-v-6644033d>23</option><option value="24" data-v-6644033d>24</option><option value="25" data-v-6644033d>25</option><option value="26" data-v-6644033d>26</option><option value="27" data-v-6644033d>27</option><option value="28" data-v-6644033d>28</option><option value="29" data-v-6644033d>29</option><option value="30" data-v-6644033d>30</option><option value="31" data-v-6644033d>31</option></select></div><div class="col-2 ps-0 pe-1" data-v-6644033d><label data-v-6644033d> </label><select class="form-select form-select-sm" name="expire_month" data-v-6644033d><option value="1" data-v-6644033d>1</option><option value="2" data-v-6644033d>2</option><option value="3" data-v-6644033d>3</option><option value="4" data-v-6644033d>4</option><option value="5" data-v-6644033d>5</option><option value="6" data-v-6644033d>6</option><option value="7" data-v-6644033d>7</option><option value="8" data-v-6644033d>8</option><option value="9" data-v-6644033d>9</option><option value="10" data-v-6644033d>10</option><option value="11" data-v-6644033d>11</option><option value="12" data-v-6644033d>12</option></select></div><div class="col-2 ps-0 pe-1" data-v-6644033d><label data-v-6644033d> </label><input type="number" class="form-control form-control-sm en" value="1403" name="expire_year" data-v-6644033d></div><div class="col-4 px-1" data-v-6644033d><label data-v-6644033d>قیمت بسته بندی</label><input type="number" min="0" class="form-control form-control-sm en" name="label_price" data-v-6644033d></div><div class="col-4 ps-0 pe-1" data-v-6644033d><label data-v-6644033d>قیمت فروش</label><input type="number" min="0" class="form-control form-control-sm en" name="sale_price" data-v-6644033d></div><div class="col-4 ps-0 pe-1" data-v-6644033d><label data-v-6644033d>قیمت پخش</label><input type="number" min="0" class="form-control form-control-sm en" name="distribute_price" data-v-6644033d></div>',8),T={class:"col-12 px-1 mt-2"},V=y((()=>(0,o.Lk)("label",null,"تصویر چیدمان",-1)));function P(e,t,a,l,n,d){const i=(0,o.g2)("image-picker");return(0,o.uX)(),(0,o.CE)("div",{id:"form-section-"+a.index,class:"row mx-0 px-2 rounded position-relative pt-2 pb-3 my-4",style:{border:"solid  rgba(231,0,0,0.1) 1px","background-color":"rgba(231,0,0,0.05)"}},[(0,o.Lk)("div",{onClick:t[0]||(t[0]=t=>e.$parent.removeBrand(a.index)),style:{position:"absolute",top:"-10px",right:"-20px",cursor:"pointer","font-size":"18px"}},h),(0,o.Lk)("div",C,[E,(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.selectedSkuCategory=e),"data-value-id":l.selectedSkuCategory.id,name:"sku_category",class:"form-select form-select-sm",id:"sku_category_id",required:""},[B,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.skuCategories,(e=>((0,o.uX)(),(0,o.CE)("option",{value:e},(0,g.v_)(e.title),9,S)))),256))],8,F),[[_.u1,l.selectedSkuCategory]])]),(0,o.Lk)("div",A,[X,(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.selectedBrand=e),"data-value-id":l.selectedBrand.id,onChange:t[3]||(t[3]=(...e)=>l.loadSkus&&l.loadSkus(...e)),name:"brand",class:"form-select form-select-sm",id:"brand",required:""},[N,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.selectedSkuCategory.brands,(e=>((0,o.uX)(),(0,o.CE)("option",{value:e.brand},(0,g.v_)(e.brand.title),9,I)))),256))],40,K),[[_.u1,l.selectedBrand]])]),R,(0,o.Lk)("div",w,[Q,(0,o.Lk)("div",U,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.skus,(e=>((0,o.uX)(),(0,o.CE)("div",q,[(0,o.Lk)("input",{class:"form-check-input",type:"checkbox",value:e.id,name:"skus_of_cat__"+l.selectedSkuCategory.id,id:"sku_"+e.id},null,8,j),(0,o.Lk)("label",{class:"form-check-label",for:"sku_"+e.id},(0,g.v_)(e.title),9,W)])))),256))])]),z,(0,o.Lk)("div",T,[V,(0,o.bF)(i,{index:a.index},null,8,["index"])])],8,x)}var D=a(3241),J={name:"FormSectionForm",components:{ImagePicker:D.A},props:["index"],setup(){const e=(0,f.lq)(),t=b.A.setup().panelUrl,a=(0,k.KR)([]),l=(0,k.KR)({}),n=(0,k.KR)({}),d=(0,k.KR)([]),i=()=>{axios.get(t+"category/sku").then((e=>{a.value=e.data})).catch((e=>{console.error(e)}))},s=()=>{console.log(l.value,n.value),l.value&&n.value&&axios.get(t+"sku?sku_category_id="+l.value.id+"&brand_id="+n.value.id).then((e=>{d.value=e.data,console.log(d.value)})).catch((e=>{console.error(e)}))};return(0,o.KC)((()=>{b.A.setup().checkUser(),i()})),{skuCategories:a,loadSkuCategories:i,selectedSkuCategory:l,skus:d,loadSkus:s,route:e,panelUrl:t,selectedBrand:n}}},O=a(1241);const $=(0,O.A)(J,[["render",P],["__scopeId","data-v-6644033d"]]);var G=$,H=a(6083),M={name:"Form",components:{CustomerInfo:H.A,FormSectionForm:G},setup(){const e=(0,f.rd)(),t=(0,f.lq)(),a=b.A.setup().panelUrl,l=(0,k.KR)({}),n=JSON.parse(localStorage.getItem("user")),d=(0,k.KR)({}),i=(0,k.KR)(0),s=()=>{axios.get(a+"customer/"+t.params.id).then((e=>{l.value=e.data})).catch((e=>{console.error(e)}))};(0,o.KC)((()=>{b.A.setup().checkUser(),s()}));const r=(0,k.KR)([]),u=()=>{let e={sku_category_id:"",brand_id:"",space:"",layout:"",sku_ids:"",face:"",presence:"",expire_day:"",expire_month:"",expire_year:"",label_price:"",sale_price:"",distribute_price:""};r.value.push(e)},c=e=>{r.value.splice(e,1)},p=()=>{i.value=b.A.setup().EmptyFieldsCount();let o=[];if(0===i.value){for(let e=0;e<document.getElementsByName("sku_category").length;e++){let t=document.getElementsByName("sku_category")[e].getAttribute("data-value-id"),a=[];document.querySelectorAll("[name='skus_of_cat__"+t+"']:checked").forEach((e=>{a.push(parseInt(e.value))})),o.push({sku_category_id:parseInt(t),brand_id:document.getElementsByName("brand")[e].getAttribute("data-value-id"),sku_ids:a,face:document.getElementsByName("face")[e].value,presence:document.getElementsByName("presence")[e].value,space:document.getElementsByName("space")[e].value,layout:document.getElementsByName("layout")[e].value,expire_date:document.getElementsByName("expire_year")[e].value+"-"+document.getElementsByName("expire_month")[e].value+"-"+document.getElementsByName("expire_day")[e].value,label_price:document.getElementsByName("label_price")[e].value,sale_price:document.getElementsByName("sale_price")[e].value,distribute_price:document.getElementsByName("distribute_price")[e].value})}axios.post(a+"form",{visitor_id:n.id,customer_id:t.params.id,description:document.querySelector("#description").value,form:o}).then((t=>{201!==t.status&&200!==t.status||(b.A.setup().reloadVisitor(),setTimeout((()=>{e.push({name:"forms"})}),1e3))})).catch((e=>{console.error(e)}))}};return{brands:r,addBrand:u,customer:l,visitor:n,findCustomer:s,router:e,route:t,form:d,removeBrand:c,saveForm:p,emptyFieldsCount:i}}};const Y=(0,O.A)(M,[["render",m],["__scopeId","data-v-10cd4bb1"]]);var Z=Y}}]);
//# sourceMappingURL=formCreate.57781d05.js.map