"use strict";(self["webpackChunkmonitoring"]=self["webpackChunkmonitoring"]||[]).push([[924],{4195:function(e,t,s){s.d(t,{A:function(){return f}});var c=s(6768);const o={class:"d-inline-block mb-3"};function r(e,t,s,r,a,l){const u=(0,c.g2)("loader-sm");return(0,c.uX)(),(0,c.CE)("div",o,[(0,c.Lk)("button",{id:"submit",class:"btn d-flex justify-content-between",style:{"background-color":"#e70000",color:"white"},onClick:t[0]||(t[0]=(...e)=>r.submitForm&&r.submitForm(...e))},[(0,c.RG)(e.$slots,"default"),(0,c.bF)(u,{class:"loader-sm d-none"})])])}const a={id:"loader-sm"},l=(0,c.Fv)('<div class="w-100 text-center mx-1" data-v-9aaf483c><svg id="spin" width="20" height="22" data-name="spin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 299.36 299.87" data-v-9aaf483c><path class="cls-1" d="M-5.26-107c0-8.87,0-17.74,0-26.6,0-6.45,4.33-10.76,10.72-10.77s10.87,4.39,10.88,10.73q0,26.79,0,53.57c0,6.49-4.32,10.66-10.83,10.62-6.72,0-10.76-4-10.78-10.58,0-9,0-18,0-27Z" transform="translate(144.05 144.33)" data-v-9aaf483c></path><path class="cls-2" d="M-106.92,16.76q-13.29,0-26.57,0C-140.1,16.73-144,12.7-144,6s4-10.76,10.59-10.78q26.76-.06,53.52,0c6.48,0,10.72,4.4,10.66,10.86-.06,6.66-4,10.67-10.69,10.69-9,0-18,0-26.95,0Z" transform="translate(144.05 144.33)" data-v-9aaf483c></path><path class="cls-3" d="M-65.82-124.94c4.84-.14,7.74,1.53,9.67,4.77q13.9,23.43,27.71,46.92a10.23,10.23,0,0,1-3.32,14.06c-5.65,3.51-11.62,2.57-14.94-2.93-9.45-15.66-18.8-31.38-27.89-47.25A10.35,10.35,0,0,1-65.82-124.94Z" transform="translate(144.05 144.33)" data-v-9aaf483c></path><path class="cls-4" d="M-57-38.87c0,9.07-8.62,14.08-16.24,9.54q-23.07-13.76-46-27.72a10.28,10.28,0,0,1-3.53-14.59c3.19-5.31,9.11-7,14.47-3.85Q-85.24-61.77-62.28-47.8C-58.89-45.75-56.58-42.95-57-38.87Z" transform="translate(144.05 144.33)" data-v-9aaf483c></path><path class="cls-5" d="M-57.75,49.3a10.17,10.17,0,0,1-5.31,8.17C-78.6,66.4-94.15,75.33-109.77,84.13c-4.87,2.75-9.19,2.11-12.7-1.34A10.85,10.85,0,0,1-125,70.17a10.15,10.15,0,0,1,4.33-4.53c15.68-9,31.33-18,47.07-26.81C-66.5,34.85-57.66,40.4-57.75,49.3Z" transform="translate(144.05 144.33)" data-v-9aaf483c></path><path class="cls-6" d="M-62.95,136.79c-9.81,0-14.26-8.08-9.38-16.63,6.18-10.81,12.48-21.56,18.7-32.34,2.49-4.32,4.83-8.71,7.38-13,3.35-5.62,9.25-7.17,14.77-4s7,9.18,3.71,14.88c-8.71,15.24-17.51,30.42-26.18,45.67C-56.06,135.06-58.8,137.32-62.95,136.79Z" transform="translate(144.05 144.33)" data-v-9aaf483c></path><path class="cls-7" d="M76.15,136.11c-3.79.4-6.64-1.48-8.54-4.68Q53.66,108,39.9,84.43c-2.73-4.7-.85-11.32,3.53-13.78,6.21-3.48,11.53-2.34,15.1,3.55,5.1,8.41,10,16.94,15,25.43,4,6.76,8,13.51,11.92,20.3C90,127.75,85.25,136.13,76.15,136.11Z" transform="translate(144.05 144.33)" data-v-9aaf483c></path><path class="cls-8" d="M16,118.92c0,9.24.1,18.47,0,27.7-.08,5.1-4.55,8.88-10.07,8.91-6.28,0-11-3.65-11.09-9.13q-.18-28.09,0-56.19C-5.14,84.44-.6,81,6.15,81a9.76,9.76,0,0,1,10,9.82c.09,4.74,0,9.48,0,14.23v13.84Z" transform="translate(144.05 144.33)" data-v-9aaf483c></path><path class="cls-9" d="M68.87,50.44c-.08-4.75,1.73-8,5.52-9.92a10.26,10.26,0,0,1,10.62.6c15,9.16,30.07,18.15,45.11,27.21,5.33,3.21,7.24,9.26,4.46,14.11C131.42,88,125.72,90,120.2,86.8c-14-8.14-27.78-16.62-41.65-25-1.82-1.09-3.7-2.09-5.42-3.32C70.24,56.45,68.27,53.82,68.87,50.44Z" transform="translate(144.05 144.33)" data-v-9aaf483c></path><path class="cls-10" d="M118.16-4.3h26.23c4.46,0,8.72,2.68,10.18,6.31a10.94,10.94,0,0,1-3.11,12.21c-.81.72-1.92,1.65-2.85,1.61-5-.22-9.86,1.8-14.85.47a5.38,5.38,0,0,0-2.22-.18c-7.64,1.3-15.3-.34-23,.37-5.71.52-11.59-.23-17.44.1-5.15.29-10.2-5.78-10.09-11s4.94-9.86,10.56-9.89C100.43-4.33,109.29-4.3,118.16-4.3Z" transform="translate(144.05 144.33)" data-v-9aaf483c></path><path class="cls-11" d="M70.49-37.4c-.5-4.22,2.43-6.45,5.32-8.15,15-8.88,30.22-17.52,45.34-26.26a10.59,10.59,0,0,1,11.89.72,10.76,10.76,0,0,1,3.47,10.62c-.81,2.84-3,4.6-5.33,5.95-11.32,6.63-22.73,13.1-34.14,19.6-3.74,2.13-7.66,4-11.28,6.3s-7.14,2.74-10.54.69A9.48,9.48,0,0,1,70.49-37.4Z" transform="translate(144.05 144.33)" data-v-9aaf483c></path><path class="cls-12" d="M74.5-124.3c3.58.25,7.12,1.15,8.66,4.66a10.62,10.62,0,0,1-.47,10.24C77.2-100,71.22-91,66.4-81.18c-3.16,6.43-7.23,12.42-11,18.55C53.08-58.82,48.18-58.24,43.2-61a8.38,8.38,0,0,1-3.11-11.34q6.55-11.91,13.36-23.69c4.78-8.28,9.73-16.46,14.52-24.74A6.45,6.45,0,0,1,74.5-124.3Z" transform="translate(144.05 144.33)" data-v-9aaf483c></path></svg></div>',1),u=[l];function n(e,t,s,o,r,l){return(0,c.uX)(),(0,c.CE)("div",a,u)}var i={name:"Loader"},d=s(1241);const m=(0,d.A)(i,[["render",n],["__scopeId","data-v-9aaf483c"]]);var p=m,v={components:{LoaderSm:p},name:"BtnSubmit",setup(){const e=()=>{document.querySelector("#submit").setAttribute("disabled","disabled"),document.querySelector(".loader-sm").classList.remove("d-none"),setTimeout((()=>{document.querySelector("#submit").removeAttribute("disabled"),document.querySelector(".loader-sm").classList.add("d-none")}),3e3)};return{submitForm:e}}};const k=(0,d.A)(v,[["render",r]]);var f=k},6083:function(e,t,s){s.d(t,{A:function(){return F}});var c=s(6768),o=s(4232);const r={class:"align-self-start text-start bg-light rounded rounded p-3",style:{border:"solid rgb(236,236,236) 1px"}},a={class:"px-1 mb-4 text-start"},l=["value"],u=(0,c.Lk)("b",null,"استان ",-1),n={class:"d-inline-block"},i=(0,c.Lk)("b",null," شهر ",-1),d={class:"d-inline-block"},m=(0,c.Lk)("br",null,null,-1),p=(0,c.Lk)("b",null," منطقه ",-1),v={class:"d-inline-block"},k=(0,c.Lk)("b",null," مسیر ",-1),f={class:"d-inline-block"},L=(0,c.Lk)("b",null," کد مسیر ",-1),g={class:"d-inline-block"},h={class:"d-flex justify-content-between"},b=(0,c.Lk)("b",null,"تلفن ",-1),y={class:"d-inline-block"},_={key:0},C=(0,c.Lk)("b",null,"گرید ",-1),x={class:"d-inline-block"};function q(e,t,s,q,S,A){return(0,c.uX)(),(0,c.CE)("div",r,[(0,c.Lk)("div",a,[(0,c.Lk)("input",{type:"hidden",id:"customer_id",value:s.customer.id},null,8,l),(0,c.Lk)("p",null,(0,o.v_)(s.customer.name),1),(0,c.Lk)("p",null,(0,o.v_)(s.customer.address),1),u,(0,c.Lk)("p",n,(0,o.v_)(s.customer.province.title),1),i,(0,c.Lk)("p",d,(0,o.v_)(s.customer.city.title),1),m,(0,c.Lk)("div",null,[p,(0,c.Lk)("p",v,(0,o.v_)(s.customer.region.title),1),k,(0,c.Lk)("p",f,(0,o.v_)(s.customer.path),1),L,(0,c.Lk)("p",g,(0,o.v_)(s.customer.path_code),1)]),(0,c.Lk)("div",null,[(0,c.Lk)("p",null,(0,o.v_)(s.customer.path_description),1)]),(0,c.Lk)("div",h,[(0,c.Lk)("div",null,[b,(0,c.Lk)("p",y,[(0,c.eW)((0,o.v_)(s.customer.phone)+" ",1),s.customer.mobile&&s.customer.phone?((0,c.uX)(),(0,c.CE)("span",_,"-")):(0,c.Q3)("",!0),(0,c.eW)(" "+(0,o.v_)(s.customer.mobile),1)])]),(0,c.Lk)("div",null,[C,(0,c.Lk)("p",x,(0,o.v_)(s.customer.scores?.grade),1)])])])])}var S={name:"CustomerInfo",props:["customer"]},A=s(1241);const w=(0,A.A)(S,[["render",q]]);var F=w},8882:function(e,t,s){s.d(t,{A:function(){return y}});var c=s(6768),o=s(5130);const r={key:0,class:"align-self-center mx-auto",style:{color:"#696969"}},a={key:0,class:"image-container p-1"},l=["src"],u={key:1},n=(0,c.Lk)("i",{style:{"font-size":"55px"},class:"bi bi-camera-fill"},null,-1),i=(0,c.Lk)("p",{style:{"font-size":"15px","margin-top":"-20px"}},"ثبت تصویر",-1),d=[n,i],m={key:1,class:"image-container p-1"},p=["src"],v=["id"],k=["id"];function f(e,t,s,n,i,f){return(0,c.uX)(),(0,c.CE)(c.FK,null,[(0,c.Lk)("div",{class:"rounded d-grid text-center cursor-pointer",onClick:t[0]||(t[0]=(...e)=>n.selectFile&&n.selectFile(...e)),style:{border:"dashed #c5c8cb 1px","min-height":"200px"}},[n.selectedFile?(0,c.Q3)("",!0):((0,c.uX)(),(0,c.CE)("div",r,[s.img?((0,c.uX)(),(0,c.CE)("div",a,[s.img?((0,c.uX)(),(0,c.CE)("img",{key:0,class:"img-fluid",style:{width:"360px !important","border-radius":"5px",height:"auto !important"},src:s.img},null,8,l)):(0,c.Q3)("",!0)])):((0,c.uX)(),(0,c.CE)("div",u,d))])),n.selectedFile?((0,c.uX)(),(0,c.CE)("div",m,[n.imageSrc?((0,c.uX)(),(0,c.CE)("img",{key:0,class:"img-fluid",style:{width:"360px !important","border-radius":"5px",height:"auto !important"},src:n.imageSrc},null,8,p)):(0,c.Q3)("",!0)])):(0,c.Q3)("",!0)]),(0,c.bo)((0,c.Lk)("input",{type:"hidden",name:"image",id:"image_code_"+s.index,"onUpdate:modelValue":t[1]||(t[1]=e=>n.imageSrc=e)},null,8,v),[[o.Jo,n.imageSrc]]),(0,c.Lk)("input",{class:"d-none",type:"file",id:"image_"+s.index,onChange:t[2]||(t[2]=(...e)=>n.fileChanged&&n.fileChanged(...e)),accept:"image/*",capture:"environment"},null,40,k)],64)}var L=s(144),g={name:"ImagePicker",props:["index","name","img"],setup(e){const t=()=>{document.querySelector("#image_"+e.index).click()},s=(0,L.KR)(),o=(0,L.KR)(null),r=new FileReader;r.onload=e=>{o.value=e.target.result};const a=e=>{let t=e.target.files||e.dataTransfer.files;t.length&&(s.value=t[0]),console.log("files",o.value)};return(0,c.nT)((()=>{s.value?r.readAsDataURL(s.value):o.value=null})),{selectFile:t,fileChanged:a,selectedFile:s,imageSrc:o,fileReader:r}}},h=s(1241);const b=(0,h.A)(g,[["render",f]]);var y=b},6135:function(e,t,s){s.r(t),s.d(t,{default:function(){return re}});var c=s(6768),o=s(4232),r=s(5130);const a={class:"d-grid text-start h-100 px-4"},l=(0,c.Lk)("b",{class:"mb-4 text-start d-block"},"گرید بندی فروشگاه",-1),u={class:"row p-0 m-0"},n={class:"col-6 px-1"},i=(0,c.Lk)("label",{for:"meterage"},"متراژ سوپر مارکت",-1),d={class:"form-select form-select-sm",id:"meterage"},m=["selected"],p=["selected"],v=["selected"],k=["selected"],f=["selected"],L={class:"col-6 px-1"},g=(0,c.Lk)("label",{for:"product_variety"},"تنوع محصولات",-1),h={class:"form-select form-select-sm",id:"product_variety"},b=["selected"],y=["selected"],_=["selected"],C=["selected"],x=["selected"],q={class:"col-6 px-1"},S=(0,c.Lk)("label",{for:"product_layout"},"چیدمان محصولات",-1),A={class:"form-select form-select-sm",id:"product_layout"},w=["selected"],F=["selected"],X=["selected"],E=["selected"],M=["selected"],Z={class:"col-6 px-1"},Q=(0,c.Lk)("label",{for:"equipment"},"تجهیزات سوپر مارکت",-1),R={class:"form-select form-select-sm",id:"equipment"},K=["selected"],I=["selected"],U=["selected"],B=["selected"],W=["selected"],T={class:"col-12 px-1"},j=(0,c.Lk)("label",{for:"sector_id"},"محله",-1),z={class:"form-select form-select-sm",id:"sector_id"},D=["selected","value"],G={class:"px-1"},P=(0,c.Lk)("label",null,"تصویر سردر سوپر مارکت",-1),$={class:"align-self-end my-2"};function J(e,t,s,J,V,H){const N=(0,c.g2)("customer-info"),O=(0,c.g2)("image-picker"),Y=(0,c.g2)("BtnSubmit");return(0,c.uX)(),(0,c.CE)("div",a,[l,J.customer.id?((0,c.uX)(),(0,c.Wv)(N,{key:0,customer:J.customer},null,8,["customer"])):(0,c.Q3)("",!0),(0,c.Lk)("div",u,[(0,c.Lk)("div",n,[i,(0,c.Lk)("select",d,[(0,c.Lk)("option",{selected:J.customer.scores&&1==J.customer.scores.meterage,value:"1"},"کمتر از 12",8,m),(0,c.Lk)("option",{selected:J.customer.scores&&2==J.customer.scores.meterage,value:"2"},"12 تا 25",8,p),(0,c.Lk)("option",{selected:J.customer.scores&&3==J.customer.scores.meterage,value:"3"},"25 تا 45",8,v),(0,c.Lk)("option",{selected:J.customer.scores&&4==J.customer.scores.meterage,value:"4"},"45 تا 60",8,k),(0,c.Lk)("option",{selected:J.customer.scores&&5==J.customer.scores.meterage,value:"5"},"بیش از 60",8,f)])]),(0,c.Lk)("div",L,[g,(0,c.Lk)("select",h,[(0,c.Lk)("option",{selected:J.customer.scores&&1==J.customer.scores.product_variety,value:"1"},"1",8,b),(0,c.Lk)("option",{selected:J.customer.scores&&2==J.customer.scores.product_variety,value:"2"},"2",8,y),(0,c.Lk)("option",{selected:J.customer.scores&&3==J.customer.scores.product_variety,value:"3"},"3",8,_),(0,c.Lk)("option",{selected:J.customer.scores&&4==J.customer.scores.product_variety,value:"4"},"4",8,C),(0,c.Lk)("option",{selected:J.customer.scores&&5==J.customer.scores.product_variety,value:"5"},"5",8,x)])]),(0,c.Lk)("div",q,[S,(0,c.Lk)("select",A,[(0,c.Lk)("option",{selected:J.customer.scores&&1==J.customer.scores.product_layout,value:"1"},"1",8,w),(0,c.Lk)("option",{selected:J.customer.scores&&2==J.customer.scores.product_layout,value:"2"},"2",8,F),(0,c.Lk)("option",{selected:J.customer.scores&&3==J.customer.scores.product_layout,value:"3"},"3",8,X),(0,c.Lk)("option",{selected:J.customer.scores&&4==J.customer.scores.product_layout,value:"4"},"4",8,E),(0,c.Lk)("option",{selected:J.customer.scores&&5==J.customer.scores.product_layout,value:"5"},"5",8,M)])]),(0,c.Lk)("div",Z,[Q,(0,c.Lk)("select",R,[(0,c.Lk)("option",{selected:J.customer.scores&&1==J.customer.scores.equipment,value:"1"},"1",8,K),(0,c.Lk)("option",{selected:J.customer.scores&&2==J.customer.scores.equipment,value:"2"},"2",8,I),(0,c.Lk)("option",{selected:J.customer.scores&&3==J.customer.scores.equipment,value:"3"},"3",8,U),(0,c.Lk)("option",{selected:J.customer.scores&&4==J.customer.scores.equipment,value:"4"},"4",8,B),(0,c.Lk)("option",{selected:J.customer.scores&&5==J.customer.scores.equipment,value:"5"},"5",8,W)])]),(0,c.Lk)("div",T,[j,(0,c.Lk)("select",z,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(J.sectors,(e=>((0,c.uX)(),(0,c.CE)("option",{selected:J.customer.scores&&J.customer.scores.sector.id==e.id,key:e.id,value:e.id},(0,o.v_)(e.title),9,D)))),128))])]),(0,c.Lk)("div",G,[P,(0,c.bF)(O,{index:"1",img:J.customer.scores?.image},null,8,["img"])])]),(0,c.Lk)("div",$,[(0,c.bF)(Y,{onClick:(0,r.D$)(J.saveScores,["prevent"])},{default:(0,c.k6)((()=>[(0,c.eW)(" ثبت ")])),_:1},8,["onClick"])])])}s(4114);var V=s(144),H=s(922),N=s(1387),O=s(1877),Y=s(6083),ee=s(8882),te=s(4195),se={name:"Grade",components:{ImagePicker:ee.A,CustomerInfo:Y.A,BtnSubmit:te.A},setup(){const e=(0,N.lq)(),t=H.A.setup().panelUrl,s=(0,V.KR)({}),o=(0,V.KR)([]),r=()=>{axios.get(t+"customer/"+e.params.id).then((e=>{s.value=e.data})).then((()=>{a()})).catch((e=>{console.error(e)}))},a=()=>{axios.get(t+"sector?city_id="+s.value.city.id).then((e=>{o.value=e.data})).catch((e=>{console.error(e)}))},l=()=>{axios.post(t+"score",{customer_id:s.value.id,sector_id:document.querySelector("#sector_id").value,meterage:document.querySelector("#meterage").value,product_variety:document.querySelector("#product_variety").value,product_layout:document.querySelector("#product_layout").value,equipment:document.querySelector("#equipment").value,image:document.querySelector("#image_code_1").value}).then((e=>{O.A.push({path:"/customer",query:{code:s.value.code}})})).catch((e=>{console.error(e)}))};return(0,c.KC)((()=>{H.A.setup().checkUser(),r()})),{panelUrl:t,loadSectors:a,sectors:o,customer:s,route:e,findCustomer:r,saveScores:l}}},ce=s(1241);const oe=(0,ce.A)(se,[["render",J]]);var re=oe}}]);
//# sourceMappingURL=grade.8b788cd4.js.map